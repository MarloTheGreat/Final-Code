<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password Page</title>
<style>
    body {
        color: white;
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        height: 100vh;
        margin: 0;
        text-align: center;
        position: relative; /* Allow positioning of pseudo-element */
        overflow: hidden; /* Prevents scrolling */
        animation: fadeIn 1s ease-in-out; /* Animation on load */
    }

    /* Pseudo-element to add a background with reduced opacity */
    body::before {
        content: ''; /* Empty content for pseudo-element */
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('images/omg4.gif'); /* Set the GIF as background */
        background-size: cover; /* Ensures the image covers the entire body without distortion */
        background-position: center; /* Centers the image */
        background-repeat: no-repeat; /* Prevents repeating the background */
        opacity: 1; /* Adjust this to control the opacity of the background image */
        z-index: -1; /* Place it behind the form */
        image-rendering: -webkit-optimize-contrast; /* Ensures high quality for GIF images in some browsers */
        image-rendering: crisp-edges; /* Another option to enhance image quality */
    }

    /* The form itself will remain fully visible */
    form {
        position: relative;
        z-index: 1; /* Ensure form is above the background */
        background-color: rgba(255, 255, 255, 0.9); /* Slightly transparent background for form */
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    h1 {
        font-size: 80px;
        margin-top: 0;
        margin-bottom: 20px;
        color: #ff6f61;
        font-family: 'Press Start 2P', cursive;
        font-weight: bold;
        text-shadow: 10px 10px 10px rgba(0, 0, 0, 0.8);
        letter-spacing: 2px;
    }

    .form-container {
        background-color: rgba(255, 255, 255, 0.375); /* Semi-transparent white */
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); /* Stronger shadow to make it pop */
        width: 300px; /* Fixed width for better alignment */
        animation: popIn 0.5s ease-in-out; /* Animation for container */
        text-align: center; /* Center text */
        display: flex;
        flex-direction: column;
    }

    @keyframes popIn {
        from { transform: scale(0.95); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

    h3 {
        margin-bottom: 20px;
        color: #333;
    }

    label {
        display: block;
        margin-bottom: 5px;
        text-align: left;
        color: #555;
        font-weight: bold;
    }

    input {
        width: 90%; /* Ensure the input fields are not full width but still take up most of the container */
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
        transition: border-color 0.3s; /* Smooth transition */
    }

    input:focus {
        border-color: #28a745; /* Change border color on focus */
        outline: none;
    }

    button {
        padding: 10px;
        border: none;
        background-color: #920000;
        color: white;
        cursor: pointer;
        border-radius: 5px;
        width: 100%; /* Full width for the button */
        transition: background-color 0.3s, transform 0.2s; /* Smooth transition */
    }

    button:hover {
        background-color: #0080bb; /* Darker green on hover */
        transform: scale(1.05); /* Slightly enlarge on hover */
    }

    /* Additional CSS for error messages and password toggle */
    .error-message {
        color: red;
        font-size: 0.9em;
        margin-top: 5px;
    }

    .footer {
        margin-top: 15px;
        font-size: 0.9em;
        color: #555;
        font-weight: bold;
    }

    .footer a {
        color: #bb8900f8; /* Green color for links */
        text-decoration: none;
    }

    .footer a:hover {
        text-decoration: underline; /* Underline on hover */
    }
</style>
</head>
<body>
    <h1>Animeverse</h1>
    <div class="form-container">
        <form id="forgotPasswordForm" action="/forgot-password" method="post">
            <h3>Forgot Password</h3>
            <label for="email">Email</label>
            <input type="text" id="email" name="email" placeholder="Enter your email">
            <div id="formError" class="error-message"></div>
            <button type="submit">Submit</button>
            <div class="footer">
                <a href="login.html">Back to Login</a>
            </div>
        </form>
    </div>
</body>
<script>
document.getElementById('forgotPasswordForm').addEventListener('submit', async (event) => {
    event.preventDefault();

    const email = document.getElementById('email').value;
    const formError = document.getElementById('formError');
    formError.textContent = ''; // Clear previous error messages

    // Basic validation
    if (!email) {
        const message = 'Email is required.';
        // formError.textContent = message;
        alert(message); // Alert for missing email
        return;
    }

    // Check if the email is in a valid format
    const emailPattern = /^[^@]+@[^@]+\.[^@]+$/;
    if (!emailPattern.test(email)) {
        const message = 'Please enter a valid email address.';
        // formError.textContent = message;
        alert(message); // Alert for invalid email format
        return;
    }

    // Submit form data via AJAX
    try {
        const response = await fetch('/forgot-password', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email })
        });

        const result = await response.json();
        if (result.success) {
            const successMessage = 'A reset password link has been sent to your email!';
            alert(successMessage); // Alert for successful request
            window.location.href = 'login.html'; // Redirect to login page
        } else {
            const errorMessage = result.message || 'Email not found.';
            // formError.textContent = errorMessage;
            alert(errorMessage); // Alert for failed attempt
        }
    } catch (error) {
        const errorMessage = 'Error connecting to the server.';
        formError.textContent = errorMessage;
        alert(errorMessage); // Alert for connection issues
    }
});
</script>
</html>
